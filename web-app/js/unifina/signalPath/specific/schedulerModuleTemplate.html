<html>
	<head>
		<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.2.1/backbone.js"></script>
		<script type="text/javascript" src="scheduler.js"></script>

		<style>
			.error-highlight {
				background-color: red;
			}
			table {
				border-collapse: collapse;
			}
		</style>
	</head>
	<body>
		<div id="scheduler"></div>
		<button id="add">Add range</button><button id="print">Print JSON</button>
		<div id="result"></div>
		<script id="scheduler-template" type="text/template">
			<table>
				<tbody>

				</tbody>
			</table>
		</script>
		<script id="range-view-template" type="text/template">
			<tr class="start">
				<td class="base">Every</td>
				<td class="base interval">
					<select name="interval">
					  	<option value="0"></option>
					  	<option value="1">2nd</option>
					  	<option value="2">3rd</option>
					  	<option value="3">4th</option>
					  	<option value="4">5th</option>
					  	<option value="5">6th</option>
					</select>
				</td>
				<td class="base interval-type">
					<select name="interval-type">
						<option value="0">hour</option>
						<option value="1">day</option>
						<option value="2">week</option>
						<option value="3">month</option>
						<option value="4">year</option>
					</select>
				</td>
				<td>from</td>
				<td class="date"></td>
				<td class="value">
					Value: <input name="value" type="text" class="form-control input-sm" />
				</td>
				<td class="delete">
					<button class="delete-btn">Delete</button>
				</td>
			</tr>
			<tr class="end">
				<td></td>
				<td></td>
				<td></td>
				<td>to</td>
				<td class="date"></td>
				<td></td>
				<td></td>
			</tr>
		</script>
		<script id="range-view-year-template" type="text/template">
				the
				<select name="day">
					{[ _.each(_.range(31), function(i){ ]}
						<option value="{{i+1}}">
							{[ if(i+1 == 1 || (i+1) % 10 == 1){ ]} 
								{{ i+1 + "st" }}
							{[ } else if(i+1 == 2 || (i+1) % 10 == 2) { ]}
								{{ i+1 + "nd" }}
							{[ } else if(i+1 == 3 || (i+1) % 10 == 3) { ]}
								{{ i+1 + "rd" }}
							{[ } else { ]}
								{{ i+1 + "th" }}
							{[ } ]}
						</option>
					{[ }); ]}
				</select>
				of
				<select name="month">
					<option value="1">January</option>
					<option value="2">February</option>
					<option value="3">March</option>
					<option value="4">April</option>
					<option value="5">May</option>
					<option value="6">June</option>
					<option value="7">July</option>
					<option value="8">August</option>
					<option value="9">September</option>
					<option value="10">October</option>
					<option value="11">November</option>
					<option value="12">December</option>
				</select>
				at
				<select name="hour">
					{[ _.each(_.range(24), function(i){ ]}
						<option value="{{i}}">
							{[ if(i<10){ ]} 
								0{{i}}
							{[ } else { ]}
								{{i}}
							{[ } ]}
						</option>
					{[ }); ]}
				</select>
				:
				<select name="minute">
					{[ _.each(_.range(60), function(i){ ]}
						<option value="{{i}}">
							{[ if(i<10){ ]} 
								0{{i}}
							{[ } else { ]}
								{{i}}
							{[ } ]}
						</option>
					{[ }); ]}
				</select>
		</script>
		<script id="range-view-month-template" type="text/template"> 
				the
				<select name="day">
					{[ _.each(_.range(31), function(i){ ]}
						<option value="{{i+1}}">
							{[ if(i+1 == 1 || (i+1) % 10 == 1){ ]} 
								{{ i+1 + "st" }}
							{[ } else if(i+1 == 2 || (i+1) % 10 == 2) { ]}
								{{ i+1 + "nd" }}
							{[ } else if(i+1 == 3 || (i+1) % 10 == 3) { ]}
								{{ i+1 + "rd" }}
							{[ } else { ]}
								{{ i+1 + "th" }}
							{[ } ]}
						</option>
					{[ }); ]}
				</select>
				at
				<select name="hour">
					{[ _.each(_.range(24), function(i){ ]}
						<option value="{{i}}">
							{[ if(i<10){ ]} 
								0{{i}}
							{[ } else { ]}
								{{i}}
							{[ } ]}
						</option>
					{[ }); ]}
				</select>
				:
				<select name="minute">
					{[ _.each(_.range(60), function(i){ ]}
						<option value="{{i}}">
							{[ if(i<10){ ]} 
								0{{i}}
							{[ } else { ]}
								{{i}}
							{[ } ]}
						</option>
					{[ }); ]}
				</select>
		</script>
		<script id="range-view-week-template" type="text/template"> 
				<select name="weekday">
					<option value="1">Monday</option>
					<option value="2">Tuesday</option>
					<option value="3">Wednesday</option>
					<option value="4">Thursday</option>
					<option value="5">Friday</option>
					<option value="6">Saturday</option>
					<option value="7">Sunday</option>
				</select>
				at
				<select name="hour">
					{[ _.each(_.range(24), function(i){ ]}
						<option value="{{i}}">
							{[ if(i<10){ ]} 
								0{{i}}
							{[ } else { ]}
								{{i}}
							{[ } ]}
						</option>
					{[ }); ]}
				</select>
				:
				<select name="minute">
					{[ _.each(_.range(60), function(i){ ]}
						<option value="{{i}}">
							{[ if(i<10){ ]} 
								0{{i}}
							{[ } else { ]}
								{{i}}
							{[ } ]}
						</option>
					{[ }); ]}
				</select>
		</script>
		<script id="range-view-day-template" type="text/template"> 
				<select name="hour">
					{[ _.each(_.range(24), function(i){ ]}
						<option value="{{i}}">
							{[ if(i<10){ ]} 
								0{{i}}
							{[ } else { ]}
								{{i}}
							{[ } ]}
						</option>
					{[ }); ]}
				</select>
				:
				<select name="minute">
					{[ _.each(_.range(60), function(i){ ]}
						<option value="{{i}}">
							{[ if(i<10){ ]} 
								0{{i}}
							{[ } else { ]}
								{{i}}
							{[ } ]}
						</option>
					{[ }); ]}
				</select>
		</script>
		<script id="range-view-hour-template" type="text/template"> 
				<select name="minute">
					{[ _.each(_.range(60), function(i){ ]}
						<option value="{{i}}">
							{[ if(i<10){ ]} 
								0{{i}}
							{[ } else { ]}
								{{i}}
							{[ } ]}
						</option>
					{[ }); ]}
				</select>
				minutes from the beginning of the hour
		</script>
		<script type="text/javascript">
			var scheduler = new Scheduler({
				el: "#scheduler"
			})
			$("#add").click(function(){
				scheduler.addRange()
			})
			$("#print").click(function(){
				$("#result").text(JSON.stringify(scheduler.buildJSON()))
			})
		</script>
 	</body>
</html 