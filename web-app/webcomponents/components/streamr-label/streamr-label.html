
<link rel="import" href="../../../js/polymer/polymer.html">

<polymer-element name="streamr-label" attributes="channel">
	<template>
		<streamr-client id="bah"></streamr-client>
		<style>
			p {
				font-size: 30px;
			}
		</style>
		<p>Price: <span>{{price}}</span></p>
		<span>{{channel}}</span>
	</template>
	
	
	<script>
		Polymer('streamr-label',{
			ready: function() {
				var _this = this
				var trySubscribe = function() {
					if (_this.$.bah.streamrClient) {
						_this.$.bah.streamrClient.subscribe(
							_this.channel, 
							function(message) {
								_this.price = message.y
							},
							{resend: true}
						)
					}
					else {
						setTimeout(trySubscribe, 200)
					}
				}

				trySubscribe()
				console.log("label ready")
			}
		});
	</script>
</polymer-element>

